create or replace PROCEDURE CREA_TABLA_INVERSIONES(NOMBRE_TABLA INVIERTE.NOMBREE%TYPE) AS
    
    Tcoderror NUMBER;
    Ttexterror VARCHAR2(100);

    EXISTE_TABLA NUMBER;
    PLSQLBLOCK VARCHAR2(500);

BEGIN

    SELECT COUNT(*) INTO EXISTE_TABLA FROM USER_TABLES WHERE TABLE_NAME = 'INVERSIONES_' || REPLACE(UPPER(NOMBRE_TABLA),' ','');

    IF (EXISTE_TABLA = 0) THEN

        DBMS_OUTPUT.PUT_LINE('LA EMPRESA NO EXISTE, SE PROCEDERA A CREAR SU PROPIA TABLA DE INVERSIONES.');

        PLSQLBLOCK := 'CREATE TABLE INVERSIONES_' || REPLACE(UPPER(NOMBRE_TABLA),' ','') || ' (NUMINV NUMBER, DNI CHAR(8), CANTIDAD FLOAT, TIPO CHAR(10))';
        EXECUTE IMMEDIATE PLSQLBLOCK;

        DBMS_OUTPUT.PUT_LINE('SE CREO CORRECTAMENTE LA TABLA ' || NOMBRE_TABLA);

    ELSE

        DBMS_OUTPUT.PUT_LINE('LA TABLA YA EXISTE, NO SE CREARA.');

    END IF;

EXCEPTION

  WHEN OTHERS THEN

  Tcoderror:= SQLCODE;
  Ttexterror:= SUBSTR(SQLERRM,1, 100);
  DBMS_output.put_line('Sale por una excepcion: ' || Tcoderror ||   '  -- ' || Ttexterror );

END CREA_TABLA_INVERSIONES;